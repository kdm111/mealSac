<!DOCTYPE html>
<html lang="ko">
  <head>
    <%- include('../common/commonHead.ejs') %>
    <title>MealSac | 식당 상세페이지</title>
    <link rel="stylesheet" href="/static/css/restaurantDetail.css" />
    <script defer src="/static/js/restaurantDetail.js"></script>
    <script
      defer
      src="https://maps.googleapis.com/maps/api/js?key=<%= googleMapsApiKey %>&callback=initMap"
    ></script>
  </head>
  <body>
    <%- include('../common/header.ejs') %>

    <main class="container col-lg-8 col-md-9 col-sm-10">
      <div class="restaurantComponent">
        <%- include('../common/restaurantComponent.ejs', { restaurant:
        restaurant }) %>
      </div>
      <section class="buttonContainer">
        <!-- <div class="tag"># <%- restaurant.restaurant_type_id%></div> -->
        <div class="button" id="callButton">
          <img
            src="/static/img/phone-call.png"
            alt="<%= restaurant.restaurant_phone %>"
            class="callIcon"
          />전화하기
        </div>
        <div
          class="button"
          onclick="document.location='<%= restaurant.restaurant_naver %>'"
        >
          <img
            src="/static/img/naver-logo.png"
            alt="네이버 지도 길찾기"
            class="naverIcon"
          />길찾기
        </div>
        <div
          class="button"
          onclick="document.location='<%= restaurant.restaurant_kakao %>'"
        >
          <img
            src="/static/img/kakao-logo.png"
            alt="카카오 지도 길찾기"
            class="kakaoIcon"
          />길찾기
        </div>
      </section>
      <nav class="sticky-top">
        <ul class="tap">
          <li><a href="#menu">대표메뉴</a></li>
          <li><a href="#review">후기</a></li>
          <li><a href="#mapTap">지도</a></li>
          <li><a href="#restaurantInfo">상세정보</a></li>
        </ul>
      </nav>

      <article>
        <section id="menu">
          <h3>대표메뉴</h3>
          <figure>
            <img src="/static/img/food.jpeg" alt="대표메뉴" />
            <div>
              <figcaption>로제 돈가스파게티</figcaption>
              <figcaption>15,000원</figcaption>
            </div>
          </figure>
          <figure>
            <img src="/static/img/food.jpeg" alt="대표메뉴" />
            <div>
              <figcaption>로제 돈가스파게티</figcaption>
              <figcaption>15,000원</figcaption>
            </div>
          </figure>
          <figure>
            <img src="/static/img/food.jpeg" alt="대표메뉴" />
            <div>
              <figcaption>로제 돈가스파게티</figcaption>
              <figcaption>15,000원</figcaption>
            </div>
          </figure>
        </section>

        <section id="review">
          <div>
            <h3 class="noMargin">후기</h3>
            <button id="showReviewForm">후기 작성하기</button>
          </div>
          <form
            id="reviewForm"
            enctype="multipart/form-data"
            style="display: none"
          >
            <!-- <input
              type="text"
              id="title"
              name="title"
              placeholder="제목"
              required
            /> -->

            <div class="inputRating">평점</div>
            <select id="ratingList" name="rating" required>
              <% for (let i = 5; i >= 0.5; i -= 0.5) { %>
              <option value="<%- i %>"><%- i %></option>
              <% } %>
            </select>
            <br />

            <textarea
              id="content"
              name="content"
              placeholder="후기"
              required
            ></textarea>
            <br />

            <label for="image">이미지 등록 </label>
            <input type="file" id="imageFiles" name="imageFiles" multiple />
            <br />

            <input id="submitbtn" type="submit" value="후기 등록" />
          </form>
          <article class="renderReviews"></article>

          <section class="pageBtn">
            <button id="prevPage">이전</button>
            <button id="nextPage">다음</button>
          </section>
        </section>

        <section id="mapTap">
          <h3>지도</h3>
          <div id="map"></div>
        </section>

        <section id="restaurantInfo">
          <h3>상세정보</h3>
          <address>주소 : <%- restaurant.restaurant_address %></address>
          <div>전화번호 : <%- restaurant.restaurant_phone %></div>
        </section>
      </article>
    </main>

    <%- include('../common/footer.ejs') %> //
    <script>
      const restaurant = <%- JSON.stringify(restaurant) %>;
    </script>
  </body>
</html>
